<html>
<head>
  <script>
    const DONATION_FORMS_BY_COUNTRY = {
      fr: {
        // default: fr
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLScys-wlfSEwCLNa5dnJIIR7LTdh7e3fpha7SL7A2jvJok8Tog/viewform',
        fr: 'https://docs.google.com/forms/d/e/1FAIpQLScys-wlfSEwCLNa5dnJIIR7LTdh7e3fpha7SL7A2jvJok8Tog/viewform'
      },
      ca: {
        // default: en
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLSf5JAiAikzMEEw86eyjoRMH5AFlwaMrOmjjlr3vGcL5RrJt9A/viewform',
        en: 'https://docs.google.com/forms/d/e/1FAIpQLSf5JAiAikzMEEw86eyjoRMH5AFlwaMrOmjjlr3vGcL5RrJt9A/viewform',
        fr: 'https://docs.google.com/forms/d/e/1FAIpQLSeM2Jt5zudVG9_IxCT0pXluTs4eHq7_p3X95klGCHSSSaDEFg/viewform'
      },
      us: {
        // default: en
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLSfgCpK5coPVFC6rJrE7ZhimiZuDoEaL6fo6gYqxsN_FIpJZhg/viewform',
        en: 'https://docs.google.com/forms/d/e/1FAIpQLSfgCpK5coPVFC6rJrE7ZhimiZuDoEaL6fo6gYqxsN_FIpJZhg/viewform'
      },
      gb: {
        // default: en
        defaultForm: 'https://docs.google.com/forms/d/11u77lVmIAt-B0245uD09UXEFV7XNSJo4op_DhoS5kfY/viewform',
        en: 'https://docs.google.com/forms/d/11u77lVmIAt-B0245uD09UXEFV7XNSJo4op_DhoS5kfY/viewform'
      },
      ch: {
        // default: de
        defaultForm: 'https://docs.google.com/forms/d/1adXa1aB0-W0sFCS3m246QdAuoseisTB7zYUrHU3MljQ/viewform',
        de: 'https://docs.google.com/forms/d/1adXa1aB0-W0sFCS3m246QdAuoseisTB7zYUrHU3MljQ/viewform',
        en: 'https://docs.google.com/forms/d/1iIS_6kp2gOV7oBhVRVUXbGMNY1vbmPeCw8E3fq3eskQ/viewform',
        fr: 'https://docs.google.com/forms/u/1/d/e/1FAIpQLSccTTMijFuFX_qimh9YMyHjInlsv7NITLfQ-LDj61aKVIV5hw/viewform',
        it: 'https://docs.google.com/forms/d/1E_X9JJcMCJAg69imKsrTTItbnKPcALq3o8vV99st3hs/viewform'
      },
      de: {
        // default: de
        defaultForm: 'https://docs.google.com/forms/d/16YAclvnp5C5dUx64UClIkgjvpANSqubcl3gkhdRQ1A0/viewform',
        de: 'https://docs.google.com/forms/d/16YAclvnp5C5dUx64UClIkgjvpANSqubcl3gkhdRQ1A0/viewform'
      },
      pl: {
        // default: pl
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLScrTaeroICRp7XKJZsQcY2zchLBd-vBrG2mnH7BRg6gORyTFg/viewform',
        pl: 'https://docs.google.com/forms/d/e/1FAIpQLScrTaeroICRp7XKJZsQcY2zchLBd-vBrG2mnH7BRg6gORyTFg/viewform'
      },
      es: {
        // default: es
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLSeSfhRSGcSuxW02Ag8WtcWyrN8sNKmh14qd7UgkYXJrSEAGYg/viewform',
        es: 'https://docs.google.com/forms/d/e/1FAIpQLSeSfhRSGcSuxW02Ag8WtcWyrN8sNKmh14qd7UgkYXJrSEAGYg/viewform'
      },
      it: {
        // default: it
        defaultForm: 'https://docs.google.com/forms/d/19HDfBSo4tOdV_gBWamCyR2MAogc5x24iG43WftiODGQ/viewform',
        it: 'https://docs.google.com/forms/d/19HDfBSo4tOdV_gBWamCyR2MAogc5x24iG43WftiODGQ/viewform'
      },
      pt: {
        // default: pt
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLScbBpYJj6WTlHhdMsFjHnBGzD_Ge_quqNv42iJiUhGst1GPrg/viewform',
        pt: 'https://docs.google.com/forms/d/e/1FAIpQLScbBpYJj6WTlHhdMsFjHnBGzD_Ge_quqNv42iJiUhGst1GPrg/viewform'
      },
      at: {
        // default: at
        defaultForm: 'https://docs.google.com/forms/d/e/1FAIpQLSeUzUPg9KZAQbMRCYV4ZrOI2hJ3RJ0oqp73XIIBlZjC1shGSA/viewform',
        de: 'https://docs.google.com/forms/d/e/1FAIpQLSeUzUPg9KZAQbMRCYV4ZrOI2hJ3RJ0oqp73XIIBlZjC1shGSA/viewform'
      }
    };

    // TODO(ajwong): This is copied from getCountry.js. Careful.
    function getCountry() {
      const url = new URL(window.location);
      const directories = url.pathname.split("/");
      if (directories.length > 2) {
        return directories[1];
      }

      return 'us';
    }

    const getLocale = () => {
      const searchParams = new URLSearchParams((new URL(window.location)).search);
      return searchParams.get('locale');
    };

    const identifyForm = () => {
      const country = getCountry();
      const countryForms = DONATION_FORMS_BY_COUNTRY[country];
      const locale = getLocale();

      if (!!locale) {
        if (countryForms[locale]) {
          return countryForms[locale];
        }

        const language = locale.split('-')[0];

        if (language && countryForms[language]) {
          return countryForms[language];
        }
      }

      return countryForms.defaultForm
    };

    window.location.replace(identifyForm());
  </script>
</head>
</html>
